
<script async src="https://ga.jspm.io/npm:es-module-shims@1.5.1/dist/es-module-shims.js" crossorigin="anonymous"></script>
<script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.150.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.150.0/examples/jsm/"
    }
  }

  
</script>
     
<style>


  body {
        margin: 0;
        padding: 0;
        color: rgb(255, 255, 255);
        background-color: rgb(0, 0, 0);

      }
      canvas {
        display: block;
      }
      .label{
        position: absolute;
        left: 400px;
      };

      label{

width: 10px;
height: 30px;
      }
  
        </style>

<div class="label">
          <label   for="animation-input">Enter Animation Name:</label>
          <input type="text" id="animation-input" name="animation-input">
          
        </div>
<button id="cameraSwitchButton">Switch Camera</button>

<script type="module">
import*as e from"three";import{OrbitControls as n}from"three/addons/controls/OrbitControls.js";import{GLTFLoader as a}from"three/addons/loaders/GLTFLoader.js";import{RGBELoader as o}from"three/addons/loaders/RGBELoader.js";import{DRACOLoader as r}from"three/addons/loaders/DRACOLoader.js";import*as t from"three/addons/utils/SkeletonUtils.js";var scene=new e.Scene;scene.background=new e.Color("black");var camera1=new e.PerspectiveCamera(30,innerWidth/innerHeight);camera1.position.set(0,-.5,4);var camera2=new e.PerspectiveCamera(30,innerWidth/innerHeight);camera2.position.set(-1,2.5,4);var renderer=new e.WebGLRenderer({antialias:!0});renderer.setSize(innerWidth,innerHeight),document.body.appendChild(renderer.domElement),window.addEventListener("resize",e=>{camera1.aspect=innerWidth/innerHeight,camera1.updateProjectionMatrix(),camera2.aspect=innerWidth/innerHeight,camera2.updateProjectionMatrix(),renderer.setSize(innerWidth,innerHeight)}),renderer.outputEncoding=e.sRGBEncoding,renderer.toneMapping=e.ACESFilmicToneMapping,renderer.toneMappingExposure=.4;let rgbeloader=new o;rgbeloader.load("how1.hdr",function(n){n.mapping=e.EquirectangularReflectionMapping,scene.environment=n});let clock=new e.Clock,animations={},modelMixer,cloneMixer,model,clone,mixer,assetLoader=new a,dracoLoader=new r;dracoLoader.setDecoderPath("https://unpkg.com/three@0.150.0/examples/jsm/libs/draco/"),assetLoader.setDRACOLoader(dracoLoader),assetLoader.load("fbx4.glb",function(n){(model=n.scene).scale.set(.7,.7,.7),model.position.set(0,-.5,0),scene.add(model),(clone=t.clone(model)).scale.set(.7,.7,.7),clone.position.set(-1,2,0),scene.add(clone),console.log("model two",clone),modelMixer=new e.AnimationMixer(model),cloneMixer=new e.AnimationMixer(clone),mixer=new e.AnimationMixer(scene),n.animations.forEach(e=>{console.log(`Animation clip ${e.name} loaded.`),animations[e.name.toLowerCase()]=e});let a=animations.idle;if(a){let o=modelMixer.clipAction(a);o.play(),o.reset();let r=cloneMixer.clipAction(a);r.play(),r.reset()}});var controls=new n(camera1,renderer.domElement);function animationLoop(){let e=clock.getDelta();modelMixer&&modelMixer.update(e),cloneMixer&&cloneMixer.update(e),controls.update(),renderer.render(scene,currentCamera)}window.addEventListener("pointerdown",()=>{controls.dispose(),(controls=new n(camera1,renderer.domElement)).enableDamping=!0,controls.dampingFactor=.5,controls.enablePan=!1},{capture:!0}),renderer.setAnimationLoop(animationLoop);var currentCamera=camera1;let cameraSwitchButton=document.getElementById("cameraSwitchButton");function switchCamera(){currentCamera=currentCamera===camera1?camera2:camera1}function playAnimation(n,a){let o="model"===a?modelMixer.clipAction(n):cloneMixer.clipAction(n);o.setLoop(e.LoopOnce),o.clampWhenFinished=!0,o.play(),o.reset(),"dancing"===n.name.toLowerCase()&&switchCamera()}cameraSwitchButton.addEventListener("click",switchCamera);let animationInput=document.getElementById("animation-input");animationInput.addEventListener("keyup",function(e){if("Enter"===e.key){let n=e.target.value.trim().toLowerCase(),a=n.match(/[a-z]+/g);e.target.value="";let o=0,r=()=>{if(o<a.length){let e=a[o],n=animations[e];n?(playAnimation(n,"talking"===e?"model":"clone"),o++,setTimeout(r,1100*n.duration)):(console.log(`Animation '${e}' not found.`),o++,r()),"danceing"===e&&switchCamera()}};r()}});
/*

*talking aniamtion work on the model only nad the dancing work on the clone and its swetching the camera   *

*/

</script>


